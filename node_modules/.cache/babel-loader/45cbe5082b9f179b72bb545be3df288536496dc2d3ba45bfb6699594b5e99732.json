{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: \"FileInput\",\n  props: {\n    label: {\n      type: String,\n      required: true\n    },\n    onChange: {\n      type: Function,\n      required: true\n    },\n    maxFiles: {\n      type: Number,\n      default: 10\n    }\n  },\n  data() {\n    return {\n      selectedFiles: []\n    };\n  },\n  methods: {\n    handleFileInput(event) {\n      const selectedFiles = Array.from(event.target.files);\n      const allowedTypes = [\"application/pdf\", \"application/vnd.ms-excel\", \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\", \"image/jpeg\", \"image/png\", \"application/msword\", \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"];\n      const newFiles = selectedFiles.filter(file => allowedTypes.includes(file.type));\n      const invalidFiles = selectedFiles.filter(file => !allowedTypes.includes(file.type));\n      const invalidLength = this.selectedFiles.length + newFiles.length > this.maxFiles;\n      if (invalidLength) {\n        alert(`Please upload no more than ${this.maxFiles} files.`);\n      } else if (invalidFiles.length > 0) {\n        alert(\"Invalid file type.\");\n      } else {\n        this.selectedFiles.push(...newFiles);\n        const files = this.selectedFiles.map(file => file.name);\n        this.onChange(files);\n      }\n    },\n    removeFile(index) {\n      this.selectedFiles.splice(index, 1);\n      const files = this.selectedFiles.map(file => file.name);\n      this.onChange(files);\n    }\n  }\n};","map":{"version":3,"names":["name","props","label","type","String","required","onChange","Function","maxFiles","Number","default","data","selectedFiles","methods","handleFileInput","event","Array","from","target","files","allowedTypes","newFiles","filter","file","includes","invalidFiles","invalidLength","length","alert","push","map","removeFile","index","splice"],"sources":["/home/vagrant/sites/ppc/src/file_upload/FileInput.vue"],"sourcesContent":["<template>\n  <div>\n    <label>{{ label }}</label>\n    <div>\n      <input type=\"file\" multiple @change=\"handleFileInput\" />\n      <ul>\n        <li v-for=\"(file, index) in selectedFiles\" :key=\"file.name\">\n          {{ file.name }}\n          <button @click=\"removeFile(index)\">Remove</button>\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"FileInput\",\n  props: {\n    label: {\n      type: String,\n      required: true,\n    },\n    onChange: {\n      type: Function,\n      required: true,\n    },\n    maxFiles: {\n      type: Number,\n      default: 10,\n    },\n  },\n  data() {\n    return {\n      selectedFiles: [],\n    };\n  },\n  methods: {\n    handleFileInput(event) {\n      const selectedFiles = Array.from(event.target.files);\n      const allowedTypes = [\n        \"application/pdf\",\n        \"application/vnd.ms-excel\",\n        \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\n        \"image/jpeg\",\n        \"image/png\",\n        \"application/msword\",\n        \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\n      ];\n      const newFiles = selectedFiles.filter((file) =>\n        allowedTypes.includes(file.type)\n      );\n      const invalidFiles = selectedFiles.filter(\n        (file) => !allowedTypes.includes(file.type)\n      );\n      const invalidLength =\n        this.selectedFiles.length + newFiles.length > this.maxFiles;\n      if (invalidLength) {\n        alert(`Please upload no more than ${this.maxFiles} files.`);\n      } else if (invalidFiles.length > 0) {\n        alert(\"Invalid file type.\");\n      } else {\n        this.selectedFiles.push(...newFiles);\n        const files = this.selectedFiles.map((file) => file.name);\n        this.onChange(files);\n      }\n    },\n    removeFile(index) {\n      this.selectedFiles.splice(index, 1);\n      const files = this.selectedFiles.map((file) => file.name);\n      this.onChange(files);\n    },\n  },\n};\n</script>\n"],"mappings":";AAgBA,eAAe;EACbA,IAAI,EAAE,WAAW;EACjBC,KAAK,EAAE;IACLC,KAAK,EAAE;MACLC,IAAI,EAAEC,MAAM;MACZC,QAAQ,EAAE;IACZ,CAAC;IACDC,QAAQ,EAAE;MACRH,IAAI,EAAEI,QAAQ;MACdF,QAAQ,EAAE;IACZ,CAAC;IACDG,QAAQ,EAAE;MACRL,IAAI,EAAEM,MAAM;MACZC,OAAO,EAAE;IACX;EACF,CAAC;EACDC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,aAAa,EAAE;IACjB,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACPC,eAAeA,CAACC,KAAK,EAAE;MACrB,MAAMH,aAAY,GAAII,KAAK,CAACC,IAAI,CAACF,KAAK,CAACG,MAAM,CAACC,KAAK,CAAC;MACpD,MAAMC,YAAW,GAAI,CACnB,iBAAiB,EACjB,0BAA0B,EAC1B,mEAAmE,EACnE,YAAY,EACZ,WAAW,EACX,oBAAoB,EACpB,yEAAyE,CAC1E;MACD,MAAMC,QAAO,GAAIT,aAAa,CAACU,MAAM,CAAEC,IAAI,IACzCH,YAAY,CAACI,QAAQ,CAACD,IAAI,CAACpB,IAAI,EAChC;MACD,MAAMsB,YAAW,GAAIb,aAAa,CAACU,MAAM,CACtCC,IAAI,IAAK,CAACH,YAAY,CAACI,QAAQ,CAACD,IAAI,CAACpB,IAAI,EAC3C;MACD,MAAMuB,aAAY,GAChB,IAAI,CAACd,aAAa,CAACe,MAAK,GAAIN,QAAQ,CAACM,MAAK,GAAI,IAAI,CAACnB,QAAQ;MAC7D,IAAIkB,aAAa,EAAE;QACjBE,KAAK,CAAE,8BAA6B,IAAI,CAACpB,QAAQ,SAAS,CAAC;MAC7D,OAAO,IAAIiB,YAAY,CAACE,MAAK,GAAI,CAAC,EAAE;QAClCC,KAAK,CAAC,oBAAoB,CAAC;MAC7B,OAAO;QACL,IAAI,CAAChB,aAAa,CAACiB,IAAI,CAAC,GAAGR,QAAQ,CAAC;QACpC,MAAMF,KAAI,GAAI,IAAI,CAACP,aAAa,CAACkB,GAAG,CAAEP,IAAI,IAAKA,IAAI,CAACvB,IAAI,CAAC;QACzD,IAAI,CAACM,QAAQ,CAACa,KAAK,CAAC;MACtB;IACF,CAAC;IACDY,UAAUA,CAACC,KAAK,EAAE;MAChB,IAAI,CAACpB,aAAa,CAACqB,MAAM,CAACD,KAAK,EAAE,CAAC,CAAC;MACnC,MAAMb,KAAI,GAAI,IAAI,CAACP,aAAa,CAACkB,GAAG,CAAEP,IAAI,IAAKA,IAAI,CAACvB,IAAI,CAAC;MACzD,IAAI,CAACM,QAAQ,CAACa,KAAK,CAAC;IACtB;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}